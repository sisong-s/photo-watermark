# 图片水印工具

一个功能完整的图片水印应用程序，支持批量处理和实时预览。

## 功能特性

### 文件处理

- ✅ 支持单张图片拖拽或文件选择器导入
- ✅ 支持批量导入多张图片或整个文件夹
- ✅ 显示已导入图片的列表（文件名）
- ✅ 支持主流格式：JPEG, PNG, BMP, TIFF
- ✅ PNG 格式支持透明通道
- ✅ 用户可选择输出为 JPEG 或 PNG
- ✅ 可指定输出文件夹，默认禁止导出到原文件夹
- ✅ 提供多种文件命名规则选项

### 水印类型

- ✅ 文本水印：自定义文本内容
- ✅ 字体大小调节（12-100）
- ✅ 颜色选择器
- ✅ 透明度调节（0-255）

### 水印布局与样式

- ✅ 实时预览功能
- ✅ 九宫格预设位置（四角、正中心等）
- ✅ 手动拖拽调整位置
- ✅ 点击图片列表切换预览

### 配置管理

- ✅ 水印模板保存和加载
- ✅ 程序启动时自动加载上次设置
- ✅ 模板管理功能

## 安装和运行

### 环境要求

- Python 3.7+
- tkinter（通常随 Python 安装）
- Pillow

### 安装依赖

```bash
pip install -r requirements.txt
```

### 运行程序

```bash
python run.py
```

或直接运行：

```bash
python watermark_app.py
```

## 使用说明

### 1. 导入图片

- 点击"导入图片"按钮选择单张或多张图片
- 点击"导入文件夹"按钮导入整个文件夹的图片
- 支持的格式：JPEG, PNG, BMP, TIFF

### 2. 设置水印

- 在右侧面板中设置水印文本
- 调整字体大小、颜色和透明度
- 选择预设位置或通过拖拽调整位置

### 3. 实时预览

- 中央预览区域会实时显示水印效果
- 点击左侧图片列表可切换预览不同图片

### 4. 导出图片

- 设置输出格式（PNG/JPEG）
- 选择文件命名规则
- 点击"导出当前图片"或"批量导出"

### 5. 模板管理

- 保存当前水印设置为模板
- 加载已保存的模板
- 程序会自动保存上次使用的设置

## 界面布局

采用三栏布局设计：

- **左栏**：图片列表、导入功能和输出设置
- **中栏**：图片预览和水印实时显示
- **右栏**：水印设置和模板管理

## 技术特性

- 使用 tkinter 构建跨平台 GUI
- PIL/Pillow 处理图片和水印
- 支持透明度和颜色混合
- 实时预览和拖拽交互
- JSON 格式的模板和设置存储

## 注意事项

1. 导出时默认禁止覆盖原文件夹，需选择不同的输出目录
2. JPEG 格式不支持透明度，会自动转换为白色背景
3. 程序会在当前目录创建 `templates` 文件夹存储模板
4. 设置会自动保存在 `last_settings.json` 文件中

## 故障排除

如果遇到字体相关问题，程序会自动回退到系统默认字体。

如果图片无法加载，请检查文件格式是否受支持。

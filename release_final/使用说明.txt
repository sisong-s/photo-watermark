# 图片水印工具 v2.0 完整版使用说明

## 快速开始

1. 双击 WatermarkAppComplete.exe 启动程序
2. 点击"导入图片"或"导入文件夹"添加要处理的图片
3. 在左侧面板调整水印设置和导出选项
4. 在上方预览区域查看效果
5. 点击"选择输出目录并导出"保存处理后的图片

## 界面布局 (v2.0 优化)

程序采用优化的布局设计：
- **左侧**：文件管理、模板管理和导出设置
- **上方中间**：图片预览区域
- **下方中间**：水印设置面板（支持滚动）

### v2.0 界面改进
- 水印设置面板移至预览下方，避免内容被遮挡
- 设置面板支持滚动，确保所有选项都能访问
- 三列式设置布局，更紧凑高效
- 优化了界面响应性和用户体验

## 完整功能列表

### ✅ 文件处理功能
- 支持单张图片导入和批量导入
- 支持拖拽导入（文件选择器）
- 支持主流格式：JPEG, PNG, BMP, TIFF
- 显示已导入图片列表
- 可选择输出为 JPEG 或 PNG 格式

### ✅ 水印功能
- 自动从EXIF信息提取拍摄日期作为水印文本
- 可自定义水印文本内容
- 可调节字体大小（12-100）
- 可选择水印颜色
- 可调节透明度（50-255）
- 五种位置选择：左上、右上、左下、右下、居中
- 可添加阴影效果增强可读性

### ✅ 实时预览
- 所有设置更改都会实时显示在预览窗口
- 点击图片列表可切换预览不同图片
- 预览图片自动缩放适应窗口大小

### ✅ 模板管理
- 可保存当前水印设置为模板
- 可加载已保存的模板
- 程序自动保存上次使用的设置

### ✅ 导出文件命名规则（新增功能）
- **保留原文件名**：使用原始文件名
- **添加自定义前缀**：如 "wm_原文件名"
- **添加自定义后缀**：如 "原文件名_watermarked"

### ✅ JPEG质量控制（新增功能）
- 当选择JPEG格式时，显示质量调节滑块
- 质量范围：10-100（默认95）
- 实时显示当前质量数值

### ✅ 图片尺寸调整（新增功能）
- **按百分比缩放**：10%-200%（默认100%）
- **按宽度调整**：指定目标宽度，高度按比例调整
- **按高度调整**：指定目标高度，宽度按比例调整
- 可选择是否启用尺寸调整

### ✅ 批量导出
- 支持批量处理多张图片
- 自动为每张图片提取对应的拍摄日期
- 显示导出进度
- 根据命名规则自动生成文件名

## 详细操作步骤

### 1. 导入图片
- 点击"导入图片"选择单个或多个图片文件
- 点击"导入文件夹"选择包含图片的文件夹
- 导入的图片会显示在左侧列表中

### 2. 调整水印设置
- **水印文本**：程序会自动提取图片的拍摄日期，也可手动修改
- **字体大小**：使用滑块或输入框调整字体大小
- **颜色**：点击"选择颜色"按钮打开颜色选择器
- **透明度**：拖动滑块调整水印透明度
- **位置**：选择水印在图片上的位置
- **阴影**：勾选可为水印添加阴影效果

### 3. 配置导出设置
#### 输出格式
- 选择PNG或JPEG格式
- JPEG格式会显示质量调节滑块

#### 文件命名规则
- **保留原文件名**：直接使用原文件名（会改变扩展名）
- **添加前缀**：在原文件名前添加自定义前缀（默认"wm_"）
- **添加后缀**：在原文件名后添加自定义后缀（默认"_watermarked"）

#### 尺寸调整（可选）
- 勾选"启用尺寸调整"
- 选择调整方式：
  - **按百分比**：使用滑块调整缩放比例
  - **按宽度**：输入目标宽度（像素）
  - **按高度**：输入目标高度（像素）

### 4. 预览效果
- 在上方预览窗口查看水印效果
- 点击左侧图片列表切换预览不同图片
- 所有设置更改都会实时更新预览

### 5. 模板管理
- **保存模板**：将当前设置保存为模板供以后使用
- **加载模板**：从已保存的模板中选择并应用设置

### 6. 导出图片
- 配置好所有设置后，点击"选择输出目录并导出"
- 选择保存目录
- 程序会批量处理所有图片并显示进度

## 功能示例

### 命名规则示例
原文件：`photo.jpg`

- **保留原文件名** + PNG格式 → `photo.png`
- **添加前缀"wm_"** + JPEG格式 → `wm_photo.jpg`
- **添加后缀"_watermarked"** + PNG格式 → `photo_watermarked.png`

### 尺寸调整示例
原图尺寸：3000×2000像素

- **按百分比50%** → 1500×1000像素
- **按宽度1920** → 1920×1280像素
- **按高度1080** → 1620×1080像素

## 技术特性

- **文件大小**：仅 16.38MB，符合小于50MB的要求
- **兼容性**：支持 Windows 系统
- **性能**：使用多线程处理，导出速度快
- **安全性**：默认禁止导出到原文件夹，防止覆盖
- **智能**：自动从EXIF信息提取拍摄时间
- **界面优化**：v2.0版本优化了布局，解决了设置面板显示问题
- **功能完整**：满足homework2的所有要求

## 示例图片

程序包含了几张示例图片，您可以用来测试各种功能。

## 注意事项

1. 程序会自动从图片EXIF信息中提取拍摄日期
2. 如果EXIF中没有日期信息，会使用文件修改时间
3. 导出时会根据选择的命名规则生成文件名
4. 建议选择与原图片不同的输出目录
5. PNG格式支持透明度，JPEG格式文件更小
6. v2.0版本的设置面板支持滚动，如果内容较多可以滚动查看
7. 尺寸调整功能会在添加水印后执行
8. JPEG质量设置只在选择JPEG格式时生效

## 故障排除

**问题：程序无法启动**
- 确保系统支持 Windows 7 或更高版本
- 检查是否有杀毒软件阻止运行

**问题：无法导入图片**
- 确认图片格式为支持的类型（JPEG, PNG, BMP, TIFF）
- 检查文件是否损坏

**问题：预览不显示**
- 尝试调整窗口大小
- 重新选择图片

**问题：设置面板内容看不全**
- v2.0版本已解决此问题，设置面板支持滚动
- 如果仍有问题，尝试调整窗口大小

**问题：导出失败**
- 确保有足够的磁盘空间
- 检查输出目录的写入权限
- 确认原图片文件未被其他程序占用

**问题：文件名冲突**
- 检查命名规则设置
- 确保输出目录中没有同名文件

## 版本信息

- 版本：v2.0 完整版
- 文件名：WatermarkAppComplete.exe
- 文件大小：16.38MB
- 支持系统：Windows 7/8/10/11
- 开发语言：Python + Tkinter
- 图像处理：Pillow库

## 更新日志

### v2.0 完整版 (当前版本)
- ✅ 添加文件命名规则选项（保留原名/前缀/后缀）
- ✅ 添加JPEG质量调节功能（10-100）
- ✅ 添加图片尺寸调整功能（百分比/宽度/高度）
- ✅ 优化界面布局，解决设置面板显示问题
- ✅ 水印设置面板移至预览下方
- ✅ 设置面板支持滚动功能
- ✅ 采用三列式设置布局，更紧凑
- ✅ 改进用户体验和界面响应性
- ✅ 完全满足homework2的所有要求

### v1.0
- ✅ 基础水印功能
- ✅ 图片导入和预览
- ✅ 模板管理
- ✅ 批量导出

## homework2 要求对照

✅ **文件处理**：支持单张/批量导入，显示图片列表
✅ **格式支持**：JPEG, PNG, BMP, TIFF输入，PNG/JPEG输出
✅ **导出设置**：可选输出目录，防止覆盖原文件
✅ **文本水印**：自定义文本，字体大小，颜色，透明度
✅ **水印布局**：实时预览，九宫格位置选择
✅ **配置管理**：模板保存/加载，自动保存设置
✅ **文件命名规则**：保留原名/自定义前缀/自定义后缀
✅ **JPEG质量调节**：0-100质量滑块
✅ **图片尺寸调整**：按宽度/高度/百分比缩放

---

如有问题或建议，请查看项目主页或联系开发者。